# ملاحظات التصميم المعتمدة (6، 13، 14)

## تصميم ربط الإعدادات بالحفظ (6) — بدون تنفيذ
- القرار المعتمد:
  - معيار confidence ثابت بنطاق 0–100 في كل النظام.
  - MATCH_AUTO_THRESHOLD يُستخدم بنفس النطاق (0–100).
  - القيمة المعتمدة: 95.
  - إذا كان التخزين عشريًا (0–1)، يتم التحويل مرة واحدة فقط عند قراءة الإعداد داخل Settings، ولا يُوزع التحويل في أكثر من موضع.
- الحفظ التلقائي:
  - يتم فقط إذا confidence >= threshold.
  - ما دون ذلك يبقى Suggestion بدون حفظ ولا يُعد خللًا.

## حصر الـ Toast + تصميم موحّد (13) — بدون تنفيذ
- القرار المعتمد: الموافقة على التصميم المقترح.
- ملاحظات تحسين (لا تغيّر القرار):
  - موضع RTL: أعلى اليمين مناسب.
  - مدة 3–4 ثوانٍ مناسبة.
- التصميم المعتمد:
  - نقطة ارتكاز واحدة: أعلى اليمين بحاوية واحدة #toast-container.
  - شكل ثابت: بطاقة خفيفة بحد جانبي ملوّن (success/error/warning/info) وأيقونة ودعم للنص العربي.
  - حركة: ظهور بانزلاق خفيف + اختفاء بعد 3–4 ثواني، وتكديس رأسي حتى 4 رسائل.
  - واجهة استخدام موحدة: window.Toast.show(message, type, duration) أو window.showToast(...) فقط.
  - دعم الوصول: role="status" وaria-live="polite".

## تصميم التنفيذ الجزئي للدفعات (14) — بدون تنفيذ
- الهدف: تنفيذ جزئي مع ضمان “إجراء واحد فقط لكل ضمان داخل نفس الدفعة”.
- المعتمد في هذه المرحلة:
  - بدون جدول تخطيط/Token أو أي حالة إضافية جديدة.
  - الاكتفاء بآلية تحقق بسيطة قبل/أثناء التنفيذ (مثال: رفض أي ضمان لديه active_action غير فارغ).
- ملاحظة: أي تصعيد معماري إضافي غير مطلوب حاليًا.

## اختبارات
- لم أشغل اختبارات.

## اقتراحات الخطوة التالية (للموافقة)
- تثبيت قيمة MATCH_AUTO_THRESHOLD بنطاق 0–100 (وتحديد مكان التحويل إن كان التخزين عشريًا).
- البدء بتنفيذ توحيد الـ Toast وفق التصميم المعتمد.
- اعتماد آلية التحقق البسيطة لمنع تكرار الإجراء داخل الدفعات (بدون بنية إضافية).
