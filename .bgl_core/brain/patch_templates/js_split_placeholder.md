# Patch Template: تفكيك ملف JS متضخم

## أين يُطبّق
- ملف JS واحد كبير (مثلاً `public/js/records.controller.js`) يخدم شاشات متعددة.

## ما يفعله
- يقسّم الملف إلى وحدات أصغر لكل شاشة/ميزة.
- يضيف استيرادًا ديناميكيًا (lazy) للوحدات غير الحرجة.

## خطوات تطبيق (يدوية/نصف آلية)
1. أنشئ ملفًا جديدًا لكل شاشة حرجة (مثلاً `records.list.js`, `records.edit.js`).
2. انقل الدوال/المعالجات الخاصة بتلك الشاشة إلى الملف الجديد.
3. في `index.php` أو الـlayout، استورد الملف المناسب لكل شاشة فقط، أو استخدم dynamic import عند الحاجة:
   ```html
   <script type="module">
     import('./public/js/records.list.js');
   </script>
   ```
4. احذف الأكواد المكررة أو غير المستخدمة أثناء النقل.
5. شغّل اختبارات Gap/UI للتأكد من عدم كسر الأحداث.

## قبول
- حجم الملف الأصلي ينخفض تحت عتبة WARN في `js_bloat`.
- لا كسر في سيناريوهات UI الحرجة.
