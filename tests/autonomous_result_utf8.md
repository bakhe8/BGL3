[*] Goal: Answer 'كيف يتم تمديد الضمان البنكي في هذا النظام؟' without hardcoded file paths.
[*] Phase 1: Discovery via Code Map...
[*] Agent is analyzing the codebase map to find target files...
[+] Agent decided to read: ['app/Services/BatchService.php', 'app/Services/ParseCoordinatorService.php', 'app/Services/RecordHydratorService.php']
  - Reading context from: app/Services/BatchService.php
  - Reading context from: app/Services/ParseCoordinatorService.php
  - Reading context from: app/Services/RecordHydratorService.php
[*] Phase 2: Autonomous Synthesis...

[+] Final Response (Generated in 15.9s):
--------------------------------------------------
في هذا النظام، يتم تمديد الضمان البنكي من خلال عدة خطوات رئيسية:

1. **تحقق من حالة الدفعة**: يتم استخدام خدمة `BatchService` لفحص إذا كانت الدفعة مغلقة أم لا. تقوم هذه الخدمة بتقديم طلب إلى قاعدة البيانات للحصول على حالة الدفعة بناءً على مصدر الاستيراد.

2. **استرجاع الضمانات في الدفعة**: إذا لم يتم العثور على أي بيانات، فتُفترض أن الدفعة مفتوحة (نشطة). إذا كانت الدفعة مغلقة، فإن الخدمة تعيد صوابًا وتمديد الضمان البنكي لا يجري.

3. **معالجة الضمانات في الدفعة**: إذا لم يتم العثور على أي بيانات، فتُفترض أن الدفعة مفتوحة (نشطة). إذا كانت الدفعة مغلقة، فإن الخدمة تعيد صوابًا وتمديد الضمان البنكي لا يجري.

4. **معالجة النصوص المدخلة**: في خدمة `ParseCoordinatorService`، يتم تحويل النصوص المدخلة إلى ضمانات في قاعدة البيانات. هذا يتضمن التحقق من ما إذا كانت النصوص تتكون من جدول أو صف واحد، ثم استخراج الحقول المناسبة وتحقق من الامكانيات.

5. **تعبئة الضمانات**: في خدمة `RecordHydratorService`، يتم تحويل البيانات الخام لضمان إلى سجل كامل يحتوي على الأسماء الموضحة والقيم الحالية. هذا يتجنب تكرار الكود للحلول مشتركة بين نقاط النهاية.

بشكل عام، يتم تمديد الضمان البنكي من خلال التحقق من حالة الدفعة وفقًا لبياناتها في قاعدة البيانات، ثم معالجة النصوص المدخلة وإنشاء ضمانات في قاعدة البيانات.
--------------------------------------------------
