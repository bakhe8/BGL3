# ملخص اختبارات الوكيل

**التاريخ:** 2026-02-06  
**النتيجة:** 11 Passed

## ما الذي تغطيه الاختبارات؟

### 1) قواعد المجال (المنطق الدوميني)
- يتأكد من عدم تسرب مفاهيم محظورة داخل كود المنتج.
- يتأكد من فصل الـ Controllers عن Models/Repositories مباشرة.

### 2) منطق الصلاحيات (Authority)
- عدم السماح للكتابة على المنتج في وضع الساندبوكس.
- السماح للقراءة/الملاحظة بدون موافقات بشرية.
- التحقق من أن نطاقات حساسة تتطلب موافقة.

### 3) محرك القرار (Decision Engine)
- القرار الحتمي عند انخفاض الثقة = Observe.
- التغييرات الدلالية الكبيرة تؤدي إلى Propose Fix.
- رفع قرار Observe إلى Propose Fix عند وجود تغيّر دلالي واضح.

### 4) انحراف مخطط قاعدة المعرفة (Schema Drift)
- كشف الجداول/الأعمدة الناقصة في `knowledge.db`.

### 5) ضوضاء auto_insights (TTL)
- استبعاد insights المنتهية الصلاحية.

## التشغيل

```powershell
python -m pytest tests\brain tests\agent -q
```

## ملاحظات مهمة
- أي فشل في اختبار قواعد المجال يعني **تعارض منطقي** بين قواعد الدومين والكود الفعلي.
- هذه الاختبارات قابلة للتوسع لتغطي بقية الحلقات (التجربة → الاقتراح → التنفيذ → التعلم).
