# BGL3 Agent (v1.5.0) ๐

ูุฐุง ุงููุฌูุฏ ูุญุชูู ุนูู "ุงููููู" (Agent) ุงูุฎุงุต ุจูุธุงู BGL3ุ ููู ูุธุงู ูุฑุงูุจุฉ ุฃุญุฏุงุซ ูุงุณุชุดุนุงุฑ (Event Sensor) ูุตูู ูุฑุตุฏ ุงูุชุบููุฑุงุช ูู ูููุงุช ุงููุดุฑูุน ูุงูุชุนุงูู ูุนูุง ุจุฐูุงุก.

## ๐๏ธ ุงููุนูุงุฑูุฉ (Architecture)

ูุนุชูุฏ ุงููููู ุนูู ุซูุงุซ ุฑูุงุฆุฒ ุฃุณุงุณูุฉ ุชุนูู ุจุดูู ูุชูุงุบู:

```mermaid
graph TD
    A[Project Files] -->|Watchdog Events| B(Observer)
    B -->|Filter/Aggregate| C{Event Normalizer}
    C -->|v1.5.0 Identity| D[events.jsonl]
    E[Inbox API] -->|JSON Commands| F(Command Worker)
    F -->|Actions| G{Agent Logic}
    G -->|Responses| H[Outbox API]
    G -->|Metrics/Pulse| I[status.json]
    G -->|State Change| B
```

1. **ุงููุฑุงูุจ (Observer):** ูุณุชูุน ูุชุบููุฑุงุช ูุธุงู ุงููููุงุช (ุฅูุดุงุกุ ุชุนุฏููุ ุญุฐู) ุจุงุณุชุฎุฏุงู ููุชุจุฉ `watchdog`.
2. **ุชูููุท ุงูุฃุญุฏุงุซ (Event Normalization):** ูุชู ุชุฌููุน ุงูุฃุญุฏุงุซ ูุชุตููุชูุง (Debouncing & Aggregation) ูุชูููู "ุงูุถุฌูุฌ" ุงูุจุฑูุฌู ูุชุญููููุง ูุตูุบุฉ ูุนูุงุฑูุฉ.
3. **ููุงุฉ ุงูุฃูุงูุฑ (Command Channel):** ูุนูู ุจูุธุงู `inbox/outbox` ุนุจุฑ ูููุงุช JSONุ ููุง ูุฌุนูู ูุณุชููุงู ุชูุงูุงู ุนู ุงูุชุทุจูู ุงูุฑุฆูุณู.

## ๐ ูููููุฉ ุงููุฌูุฏ (Directory Structure)

- `main.py`: ุงูููุจ ุงููุงุจุถ ููููููุ ููุชูุจ ุจูุบุฉ Python.
- `config.yml`: ููู ุงูุฅุนุฏุงุฏุงุช ุงูุฑุฆูุณู (Features & Behavior).
- `commands/`:
  - `inbox/`: ุถุน ูููุงุช JSON ููุง ูุฅุตุฏุงุฑ ุฃูุงูุฑ ูููููู.
  - `outbox/`: ููุง ุชุฌุฏ ุฑุฏูุฏ ุงููููู ุนูู ุฃูุงูุฑู.
- `scripts/`: ุฃุฏูุงุช ูุณุงุนุฏุฉ ููุงุฎุชุจุงุฑุ ุชุฏููุฑ ุงูุณุฌูุงุชุ ูุงูุชููุฆุฉ.
- `events.jsonl`: ุณุฌู ุงูุฃุญุฏุงุซ ุงูุชุงุฑูุฎู ุจุตูุบุฉ JSON Structured.
- `status.json`: ูุจุถ ุงููุธุงู (Heartbeat) ูุนุฑุถ ุงูุญุงูุฉ ุงูุญุงููุฉ ูููููู.

## ๐ ุงูุชุดุบูู (Getting Started)

1. **ุงูุชุซุจูุช:** ุชุฃูุฏ ูู ุชุซุจูุช ุงูููุชุจุงุช ุงููุทููุจุฉ:

    ```bash
    pip install watchdog pyyaml
    ```

2. **ุงูุชุดุบูู:**

    ```bash
    python .guardian/agent/main.py
    ```

    ุฃู ุงุณุชุฎุฏู ุณูุฑุจุช ุชุดุบูู PowerShell ุงููููุฃ ูุณุจูุงู.

## ๐๏ธ ุงูุฃูุงูุฑ ุงููุฏุนููุฉ (Supported Commands)

ููููู ุงูุชุญูู ูู ุงููููู ุนุจุฑ ุฅุฑุณุงู ูููุงุช JSON ุฅูู `agent/commands/inbox/`:

- `ping`: ููุชุฃูุฏ ูู ุงุณุชุฌุงุจุฉ ุงููููู.
- `pause` / `resume`: ูุฅููุงู ุงููุฑุงูุจุฉ ูุคูุชุงู ุฃู ุงุณุชุฆูุงููุง.
- `rotate_logs`: ูุชุฏููุฑ ุงูุณุฌูุงุช ุงููุฏููุฉ ูุชุตููุฑ ุงููููุงุช ุงูุญุงููุฉ ุจุฃูุงู.
- `set_ignored` / `add_ignored`: ูุชุนุฏูู ููุงุนุฏ ุงูุชุฌุงูู ุฃุซูุงุก ุงูุชุดุบูู.

## ๐ ูููุฐุฌ ุจูุงูุงุช ุงูุฃุญุฏุงุซ (Event Schema)

ุงูุฃุญุฏุงุซ ูู `events.jsonl` ุชุชุจุน ูููููุฉ ุซุงุจุชุฉ (v1.4.0):

```json
{
  "id": "ee230e4f-b4ab-42aa-b72e-e59ab2096ad6",
  "seq": 4,
  "ts": "2026-01-29T15:25:07.038128+00:00",
  "event": "modified",
  "path_rel": "index.php",
  "path_abs": "C:\\path\\to\\index.php",
  "is_dir": false
}
```

## โ๏ธ ููุงุญุธุงุช ูุงูุฉ (Troubleshooting)

- **ุจูุฆุฉ Windows:** ูู ุญุงูุงุช ูุงุฏุฑุฉ ุนูุฏ ุชุฏููุฑ ุงูุณุฌูุงุชุ ูุฏ ูุธูุฑ ุฎุทุฃ `[WinError 32]` ุจุณุจุจ ููู ุงููููุงุช ูู ุงููุธุงู. ุงููููู ุณูููู ุนููู ุชููุงุฆูุงู ุฏูู ููุฏุงู ุฃุญุฏุงุซ.
- **ุงูุชุฌุงูู (Ignore):** ูุชู ุชุฌุงูู ุงููุฌูุฏุงุช ุงูุซูููุฉ ูุซู `vendor` ู `node_modules` ุงูุชุฑุงุถูุงู ูุถูุงู ุงูุฃุฏุงุก.

- [Evaluation Report v1.5.0](file:///c:/Users/Bakheet/Documents/Projects/BGL3/agent/docs/evaluation_v1.5.0.md)

## ๐งญ ุงูุชูุงูู ูุน ุงูุฏูุงุบ (Brain Integration)

ุจุฏุกุงู ูู ุงูุฅุตุฏุงุฑ **1.5.0**ุ ูู ูุนุฏ ุงููููู ูุนูู ุจููุฑุฏู. ูู ูุดูู "ุทุจูุฉ ุงูุงุณุชุดุนุงุฑ" (Sensing Layer)ุ ุจูููุง ุชุชู ูุนุงูุฌุฉ ุงููุนูู ูู ูุฌูุฏ `brain/`:

- **ูููุฉ ุงููููู:** ุฑุตุฏ ุงูุฃุญุฏุงุซุ ุชุณุฌูููุงุ ูุฅุฏุงุฑุฉ ุงูุฃูุงูุฑ ุงูุฎุงู.
- **ูููุฉ ุงูุฏูุงุบ:** ุชุญููู ุงูุฃููุงุท ุงูุฏูุงููุฉุ ููู ุฌุบุฑุงููุง ุงููุดุฑูุนุ ูุงุชุฎุงุฐ ุงููุฑุงุฑุงุช (ููุฏ ุงูุชุทููุฑ).

---
**ููุงุญุธุฉ ูููุทูุฑูู:** ุงููููู ูุตูู ููููู "ูุณุชุดุนุฑุงู" (Sensor) ุตุงุฏูุงู ูุฏูููุงู. ููุญุตูู ุนูู ุชุญููู ุฐูู ููุง ูุญุฏุซ ูู ุงูููุฏุ ูุฑุฌู ูุฑุงุฌุนุฉ [Brain README](../brain/README.md).
